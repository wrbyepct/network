{% extends 'network/layout.html' %} 
{% load post_extra %}
{% block body %}
  <div x-data="{ 
    isPostDetail: false, 
    isIncubating: {{ is_incubating|yesno:'true,false' }},
    onListPage: true
  }" > 
    <div class="container-fluid mt-4">
      <div class="row">
        <!-- Left sidebar -->
       {% include 'posts/partial/turboy.html' %}
        <!-- Main Content Area -->
        <div class="col-lg-6">
          <div x-show="!isIncubating" class="mb-4">
             {% include 'posts/partial/post_composer.html' %}
          </div>
          
          <div 
            id="published-posts" 
            class="grid grid-cols-1 gap-4"
          >
            {% for post in posts %}
                {% include 'posts/post/list_card.html' %}
            {% empty %}
              <p class="text-center text-muted">No turties yet... Let's hatch One!</p>
            {% endfor %}
          </div>
        </div>

        <!-- Right Sidebar (Future expansion) -->

      </div>

      <!-- Pagination -->
      <div class="flex justify-center items-center space-x-3 py-6"
          style="font-family: 'Press Start 2P', monospace; font-size: 10px;">

        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}"
            class="text-decoration-none pixel-btn bg-green-400 border-4 border-green-800 
                    !text-stone-900 px-4 py-2
                    rounded-md shadow-[4px_4px_0px_#3B3B3B]
                    hover:bg-green-300 hover:-translate-y-1 hover:shadow-[6px_6px_0px_#3B3B3B]
                    active:translate-y-0 transition-all duration-150">
            ◀ PREV
          </a>
        {% endif %}

        <!-- Page Counter -->
        <div class="bg-yellow-200 border-4 border-stone-700 flex items-center gap-2 px-4 py-2">

          <span class="text-stone-700 text-bold">PAGE</span>

          <!-- Current Page (editable egg) -->
          <div x-data="{ 
                  page: {{ page_obj.number|stringformat:'02d' }},
                  get pageUrl() { return `?page=${this.page}` }
              }"
              class="digit-display bg-green-200 border-4 border-green-700 
                      w-16 h-8 flex items-center justify-center text-green-900 rounded-sm font-bold relative">

            <input class="absolute inset-0 bg-transparent text-center border-none font-bold rounded-sm"
                  type="text"
                  :value="page"
                  x-model="page"
                  @keydown.enter="window.location.href = pageUrl">
          </div>

          <span class="text-stone-700">/</span>

          <!-- Total Pages (stone egg) -->
          <div class="digit-display bg-amber-200 border-4 border-amber-500 rounded-sm
                      w-16 h-8 flex items-center justify-center text-stone-800 font-semibold">
            {{ page_obj.paginator.num_pages }}
          </div>
        </div>

        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}"
            class="text-decoration-none pixel-btn bg-green-400 border-4 border-green-800 !text-stone-900 px-4 py-2
                    rounded-md shadow-[4px_4px_0px_#3B3B3B]
                    hover:bg-green-300 hover:-translate-y-1 hover:shadow-[6px_6px_0px_#3B3B3B]
                    active:translate-y-0 transition-all duration-150">
            NEXT ▶
          </a>
        {% endif %}
      </div>
    </div>
  </div>

<style>
 

    .pixel-btn {
      box-shadow:
        6px 6px 0px rgba(0, 0, 0, 0.3),
        inset 2px 2px 0px rgba(255, 255, 255, 0.2);
      text-decoration: none;
      font-weight: bold;
      letter-spacing: 1px;
    }

    .pixel-btn:hover {
      box-shadow:
        4px 4px 0px rgba(0, 0, 0, 0.3),
        inset 2px 2px 0px rgba(255, 255, 255, 0.3);
    }

    .pixel-btn:active {
      box-shadow:
        2px 2px 0px rgba(0, 0, 0, 0.3),
        inset 1px 1px 0px rgba(0, 0, 0, 0.2);
    }

    .digit-display {
      font-family: 'Courier New', monospace;
      text-shadow: 0 0 4px currentColor;
    }


    /* Mobile responsiveness */
    @media (max-width: 640px) {

      .pixel-btn {
        px-3 py-2;
      }
    }
  </style>

{% endblock %}
