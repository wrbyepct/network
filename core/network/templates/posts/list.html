{% extends 'network/layout.html' %} 
{% load post_extra %}
{% block body %}
  <div 
    x-data="{ 
      isPostDetail: false, 
      isIncubating: {{ is_incubating|yesno:'true,false' }},
      onListPage: true
    }" 
    class="relative z-10"
  > 
    <div class="w-full xl:w-[98vw] lg:container-2xl pt-4 mx-auto px-2 lg:px-0">
      <div class="grid grid-cols-12 space-x-2 lg:space-x-4">

        <!-- Left sidebar -->
       {% include 'posts/partial/turboy.html' %}
        <!-- Main Content Area -->
        <div class="col-span-12 lg:col-span-8">
          <div x-show="!isIncubating && !isHatching" x-cloak class="mb-4">
             {% include 'posts/partial/post_composer.html' %}
          </div>
          
          <div 
            id="published-posts" 
            class="grid grid-cols-1 gap-4"
          >
            {% for post in posts %}
                {% include 'posts/post/list_card.html' %}
            {% empty %}
              <p class="text-center text-muted">No turties yet... Let's hatch One!</p>
            {% endfor %}
          </div>
        </div>

        <!-- Right Sidebar (Future expansion) -->

      </div>

      <!-- Pagination -->
      <div class="flex justify-center items-center space-x-3 py-6"
          style="font-family: 'Press Start 2P', monospace; font-size: 10px;">

        {% if page_obj.has_previous %}
          <a href="?page={{ page_obj.previous_page_number }}"
            class="text-decoration-none text-bold bg-green-400 border-4 border-green-800 
                    !text-emerald-900 px-4 py-2 
                    rounded-xl hover:bg-green-300 hover:-translate-y-1 hover:shadow-[6px_6px_0px_#3B3B3B]
                    active:translate-y-0 transition-all duration-150">
            ◀ PREV
          </a>
        {% endif %}

        <!-- Page Counter -->
        <div class="bg-yellow-200 border-4 border-stone-700 flex items-center gap-2 px-4 py-2">

          <span class="text-stone-700 text-bold">PAGE</span>

          <!-- Current Page (editable egg) -->
          <div x-data="{ 
                  page: {{ page_obj.number|stringformat:'02d' }},
                  get pageUrl() { return `?page=${this.page}` }
              }"
              class="digit-display bg-green-200 border-4 border-green-700 
                      w-16 h-8 flex items-center justify-center text-green-900 rounded-sm font-bold relative">

            <input class="absolute inset-0 bg-transparent text-center border-none font-bold rounded-sm"
                  type="text"
                  :value="page"
                  x-model="page"
                  @keydown.enter="window.location.href = pageUrl">
          </div>

          <span class="text-stone-700">/</span>

          <!-- Total Pages (stone egg) -->
          <div class="digit-display bg-amber-200 border-4 border-amber-500 rounded-sm
                      w-16 h-8 flex items-center justify-center text-stone-800 font-semibold">
            {{ page_obj.paginator.num_pages }}
          </div>
        </div>

        {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}"
            class="text-decoration-none text-bold bg-green-400 border-4 border-green-800 !text-emerald-900 px-4 py-2
                    rounded-xl hover:bg-green-300 hover:-translate-y-1 hover:shadow-[6px_6px_0px_#3B3B3B]
                    active:translate-y-0 transition-all duration-150">
            NEXT ▶
          </a>
        {% endif %}
      </div>
    </div>


    <!-- Floating Mini Turboy Console (Mobile/Tablet) -->
    {% if request.user.is_authenticated %}
      {% include 'common/floating_mini_turboy.html' %}
    {% endif %}

  </div>

<style>
    

    /* Holographic Pagination Buttons */
    .pixel-btn {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(6, 182, 212, 0.4);
      color: var(--holo-glow, #06b6d4);
      border-radius: 8px;
      padding: 8px 16px;
      text-decoration: none;
      font-weight: 600;
      letter-spacing: 0.5px;
      backdrop-filter: blur(15px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .pixel-btn::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, 
        transparent, 
        rgba(6, 182, 212, 0.2), 
        transparent
      );
      opacity: 0;
      transition: opacity 0.3s;
    }

    .pixel-btn:hover::after {
      opacity: 1;
    }

    .pixel-btn:hover {
      background: rgba(6, 182, 212, 0.15);
      border-color: rgba(6, 182, 212, 0.6);
      box-shadow: 
        0 0 30px rgba(6, 182, 212, 0.4),
        inset 0 2px 4px rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
      text-decoration: none;
      color: #34d399;
      text-shadow: 0 0 10px rgba(52, 211, 153, 0.5);
    }

    .pixel-btn:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    /* Holographic Digital Display */
    .digit-display {
      font-family: 'Courier New', monospace;
      background: rgba(0, 0, 0, 0.8);
      border: 1px solid rgba(6, 182, 212, 0.3);
      backdrop-filter: blur(10px);
      box-shadow: 
        0 2px 4px rgba(0, 0, 0, 0.1),
        inset 0 1px 2px rgba(6, 182, 212, 0.2);
      color: #06b6d4;
      text-shadow: 0 0 8px currentColor;
    }

    /* Glass Page Counter */
    .bg-yellow-200 {
      background: rgba(255, 255, 255, 0.08) !important;
      border: 1px solid rgba(6, 182, 212, 0.2) !important;
      backdrop-filter: blur(15px);
      box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.1),
        inset 0 1px 2px rgba(255, 255, 255, 0.05);
      color: rgba(255, 255, 255, 0.9) !important;
    }

    .text-stone-700 {
      color: rgba(255, 255, 255, 0.8) !important;
      text-shadow: 0 0 5px rgba(6, 182, 212, 0.3);
    }

    /* Mobile responsiveness for glass effects */
    @media (max-width: 640px) {
      .pixel-btn {
        padding: 6px 12px;
        font-size: 8px;
        /* Reduced blur for mobile performance */
        backdrop-filter: blur(10px);
      }
      
      .post-card {
        /* Lighter glass effects for mobile */
        backdrop-filter: blur(15px);
        box-shadow: 
          0 10px 20px rgba(0, 0, 0, 0.1),
          inset 0 1px 2px rgba(255, 255, 255, 0.05);
      }
      
      .post-card:hover {
        /* Simplified mobile hover */
        transform: translateY(-2px);
        box-shadow: 
          0 15px 30px rgba(0, 0, 0, 0.15),
          0 0 20px rgba(6, 182, 212, 0.1);
      }
      
      /* Reduced animation complexity on mobile */
      .breathing {
        animation: none;
      }
      
      .digit-display {
        backdrop-filter: blur(8px);
      }
      
      .bg-yellow-200 {
        backdrop-filter: blur(10px) !important;
      }
    }

    /* Reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      .breathing,
      .post-card,
      .pixel-btn {
        animation: none;
        transition: none;
      }
    }

    /* Holographic Form Elements */
    .holo-form {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(6, 182, 212, 0.3);
      backdrop-filter: blur(15px);
      box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.1),
        inset 0 1px 2px rgba(255, 255, 255, 0.05);
    }

    .holo-textarea {
      color: rgba(255, 255, 255, 0.9) !important;
    }

    .holo-textarea::placeholder {
      color: rgba(255, 255, 255, 0.5) !important;
    }

    .holo-textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.3);
    }

    .holo-submit-btn {
      color: rgba(255, 255, 255, 0.7);
      transition: all 0.3s ease;
    }

    .holo-submit-btn:hover:not(:disabled) {
      color: #06b6d4;
      text-shadow: 0 0 10px rgba(6, 182, 212, 0.5);
      transform: scale(1.1);
    }

    .holo-composer-container {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(6, 182, 212, 0.2);
      backdrop-filter: blur(20px);
      box-shadow: 
        0 8px 16px rgba(0, 0, 0, 0.1),
        inset 0 1px 2px rgba(255, 255, 255, 0.05);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .holo-composer-container:hover {
      background: rgba(6, 182, 212, 0.1);
      border-color: rgba(6, 182, 212, 0.4);
      box-shadow: 
        0 12px 24px rgba(0, 0, 0, 0.15),
        0 0 30px rgba(6, 182, 212, 0.2),
        inset 0 1px 2px rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }

    .holo-input-field {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(6, 182, 212, 0.3);
      backdrop-filter: blur(10px);
    }


    .holo-avatar {
      border: 2px solid rgba(6, 182, 212, 0.4);
      box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
      filter: drop-shadow(0 0 8px rgba(6, 182, 212, 0.2));
    }
  </style>

{% endblock %}
