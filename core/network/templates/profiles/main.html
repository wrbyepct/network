{% extends "network/layout.html" %}
{% block body %}
<!-- Follow toast -->

<div id="follow_message">

</div>

<div 
  class="container mt-5"
  x-data="{'has_messages': '{{ messages|length|yesno:'true,false' }}'}"
>
    <div class="d-flex justify-content-between">
        <h2>{{ profile.username }}'s Profile</h2>
        {% if profile.user == request.user %}
          <a href="{% url 'profile_edit' %}">Edit</a>
        {% else %}
          <a 
            class="btn btn-outline-primary"
            hx-post="{% url 'follow' profile.username %}"
            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
            hx-target="#follow_message"
          >
          Follow
          </a>
        {% endif %}
    </div>

  <ul class="nav nav-tabs mb-3"
    x-data="{'activeTab': '{{ current_tab }}'}"
  >
    {% for tab in tabs %}
        <li class="nav-item">
          <a class="nav-link"
            :class="{ 'active': activeTab === '{{ tab }}' }"
            @click="activeTab = '{{ tab }}'"
            hx-get="{% url 'profile_'|add:tab profile.username %}"
            hx-vals='{"partial_request": "{{ tab }}"}'
            hx-target="#tab-content"
            hx-push-url="{% url 'profile_'|add:tab profile.username %}"
            hx-swap="innerHTML">
            {{ tab|title }}
          </a>
        </li>
    {% endfor %}
  </ul>

  <div id="tab-content">
    {% block tab_content %}
    {% endblock %}
  </div>
</div>

{% endblock %}
