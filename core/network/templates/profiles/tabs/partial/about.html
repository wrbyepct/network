


<div 
  x-data="{ activeTab: 'story' }" 
  class="max-w-3xl mx-auto my-8 p-4 bg-emerald-800 border-4 border-amber-600 shadow-lg shadow-amber-600/50 rounded-none font-mono"
  style="font-family: 'Press Start 2P', monospace; font-size: 10px; image-rendering: pixelated;">

    <!-- "Shell Scutes" Tabs -->
    <div class="flex border-b-4 border-amber-600 mb-4">
        <button @click="activeTab = 'story'" 
                :class="{ 'bg-emerald-700 text-stone-50': activeTab === 'story', 'text-stone-300': activeTab !== 'story' }"
                class="px-4 py-2 focus:outline-none uppercase tracking-widest hover:bg-emerald-700/50">
            Story
        </button>
        <button @click="activeTab = 'follow'" 
                :class="{ 'bg-emerald-700 text-stone-50': activeTab === 'follow', 'text-stone-300': activeTab !== 'follow' }"
                class="px-4 py-2 focus:outline-none uppercase tracking-widest hover:bg-emerald-700/50">
            Follow
        </button>
        <button @click="activeTab = 'journey'" 
                :class="{ 'bg-emerald-700 text-stone-50': activeTab === 'journey', 'text-stone-300': activeTab !== 'journey' }"
                class="px-4 py-2 focus:outline-none uppercase tracking-widest hover:bg-emerald-700/50">
            Journey
        </button>
    </div>

    <!-- Tab Content -->
    <div>
        <!-- Story Tab -->
        <div x-show="activeTab === 'story'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform scale-90" x-transition:enter-end="opacity-100 transform scale-100">
            <div class="flex items-center space-x-4">
                <img src="{{ profile.profile_picture.url }}" alt="Profile Picture"
                     class="w-24 h-24 border-4 border-amber-500 ring-2 ring-emerald-600 shadow-lg shadow-amber-600/50 object-cover"
                     style="image-rendering: pixelated;">

                <div> 
                  <div class="flex items-center">
                    <h2 class="uppercase tracking-widest text-stone-50 drop-shadow-[2px_2px_0_rgba(0,0,0,0.4)]">{{ profile.first_name }} {{ profile.last_name }}</h2>
                    <span class="ml-4 text-md {{ activity.color }}">
                      is {{ activity.status }} {{ activity.emoji }} 
                    </span>
                  </div>
            
                  <p class="text-stone-300">@{{ profile.username }}</p>
                </div>
            </div>
            {% if profile.bio %}
                <div class="text-stone-50 bg-emerald-700 border-4 border-amber-600 p-3 mt-4 shadow-lg shadow-amber-600/50">
                  <p class="text-lg">Bio: </p>
                  <p>{{ profile.bio }}</p>
                </div>
            {% endif %}
            <div class="text-amber-300 space-y-2 bg-emerald-700 border-4 border-amber-600 p-3 shadow-lg shadow-amber-600/50">
               <p class="text-lg">Stats: </p>
               {% if profile.special_eggs_count %}
                <div class="flex justify-between">
                  <span>Special Eggs:</span>
                  <span class="text-stone-50">{{ profile.special_eggs_count }}</span>
                </div>
               {% endif %}

               {% if profile.regular_eggs_count %}
                <div class="flex justify-between">
                  <span>Cute Eggs:</span>
                  <span class="text-stone-50">{{ profile.regular_eggs_count }}</span>
                </div>
               {% endif %}

                <div class="flex justify-between">
                  <span >Posts:</span>
                  <span class="text-stone-50">{{ profile.posts_count }}</span>
                </div>
            
                <div class="flex justify-between">
                  <span >Followers:</span>
                  <span class="text-stone-50">{{ profile.followers.count }}</span>
                </div>
            
                <div class="flex justify-between">
                  <span >Following:</span>
                  <span class="text-stone-50">{{ profile.following.count }}</span>
                </div>
            
                <div class="flex justify-between">
                  <span >Albums:</span>
                  <span class="text-stone-50">{{ profile.albums_count }}</span>
                </div>
            
                <div class="flex justify-between">
                  <span>Turtler since:</span>
                  <span class="text-stone-50">{{ profile.created_at|date:"Y-m-d" }}</span>
                </div>
            </div>
        </div>


        <!-- Follower tab -->

        <div x-show="activeTab === 'follow'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform scale-90" x-transition:enter-end="opacity-100 transform scale-100">
          <!-- Fetch followers/following tab -->
          
            <div 
                hx-get="{% url 'profile_follow' profile.username %}"
                hx-trigger="intersect once"
                hx-swap="innerHTML"
              >
            </div>
        </div>

        <!-- Journey Tab -->
        <div x-show="activeTab === 'journey'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform scale-90" x-transition:enter-end="opacity-100 transform scale-100">
            <p class="text-stone-50">The user's journey will be displayed here. Coming soon!</p>
        </div>
    </div>
</div>
