<!-- Holographic Turtle Nest Collection -->
<div
  class="min-h-screen p-3 lg:p-6">
  <div class="max-w-6xl mx-auto">
    
    <!-- Holographic Page Header -->
    <div class="text-center mb-6 lg:mb-8">
      <div class="flex items-center justify-center mb-3"
           style="font-family: 'Press Start 2P', monospace; font-size: 12px;">
        <img class="w-8 lg:w-10 mx-2 lg:mx-4 rounded-full border-2 border-cyan-400 
                   shadow-lg hover:shadow-cyan-400/50 transition-all duration-300 holo-avatar" 
             src="/media/defaults/yeah.png" 
             alt="Image displaying a turtle with Yeah gesture">
        <h1 class="text-xl lg:text-4xl font-bold mb-2 text-center text-white
                   hover:text-cyan-400 transition-colors duration-300"
            style="text-shadow: 0 0 20px rgba(6, 182, 212, 0.5);">
          THE TURTLE SANCTUARY
        </h1>
        <img class="w-8 lg:w-10 mx-2 lg:mx-4 rounded-full border-2 border-cyan-400 
                   shadow-lg hover:shadow-cyan-400/50 transition-all duration-300 holo-avatar" 
             src="/media/defaults/yeah.png" 
             alt="Image displaying a turtle with Yeah gesture">
      </div>
      <p class="text-cyan-300 text-sm lg:text-base opacity-90" 
         style="text-shadow: 0 0 10px rgba(52, 211, 153, 0.3);">
        Explore the collection and check the nest
      </p>
    </div>

    <!-- Sacred Nesting Grounds -->
      
    <div 
      class="rounded-xl p-4 lg:p-6 min-h-96"
      x-data="{ 
        onListPage: false,
        displayScreen: false,
      }">
    
        <!-- Nest Title -->
        <div class="text-center mb-6">
          <div class="flex items-center justify-center mb-2">
            <h2 class="text-xl lg:text-2xl font-bold text-white"
                style="font-family: 'Press Start 2P', monospace; font-size: 16px; text-shadow: 0 0 15px rgba(52, 211, 153, 0.5);">
              {{ profile.username|upper }}'S NEST
            </h2>
          </div>
        </div>

        <!-- Nest Container -->
        <div class="flex flex-col items-center justify-center">
          <!-- Incubating State -->
          <div 
            x-show="!eggHatched"
            x-cloak
            x-transition:enter="transition ease-out duration-500"
            x-transition:enter-start="opacity-0 scale-95"
            x-transition:enter-end="opacity-100 scale-100"
            class="text-center">
            
            <!-- Holographic Incubation Chamber -->
            <div class="relative mb-6">
              
              <!-- Holographic Container -->
              <div class="relative w-64 h-64 lg:w-80 lg:h-80 mx-auto">
                
                <!-- Main Glass Chamber -->
                <div class="w-full h-full rounded-full mini-screen backdrop-blur-sm 
                            border-2 border-cyan-400/30 shadow-2xl
                            bg-gradient-to-br from-cyan-500/5 to-emerald-500/5
                            hover:border-cyan-400/50 transition-all duration-500 group relative overflow-hidden">
                  
                  <!-- Subtle glow particles -->
                  <div class="absolute top-6 left-8 w-1 h-1 bg-cyan-400 rounded-full animate-ping opacity-70"></div>
                  <div class="absolute top-12 right-12 w-1 h-1 bg-emerald-400 rounded-full animate-ping opacity-60" style="animation-delay: 2s;"></div>
                  <div class="absolute bottom-8 left-12 w-0.5 h-0.5 bg-purple-400 rounded-full animate-ping opacity-50" style="animation-delay: 4s;"></div>
                  <div class="absolute bottom-12 right-8 w-0.5 h-0.5 bg-cyan-300 rounded-full animate-ping opacity-60" style="animation-delay: 6s;"></div>
                  
                  <!-- Holographic Base -->
                  <div class="absolute bottom-6 left-1/2 transform -translate-x-1/2 
                              w-16 h-6 bg-gradient-to-t from-cyan-400/20 to-transparent 
                              rounded-full border border-cyan-400/30 backdrop-blur-sm"></div>
                  
                  <!-- The Incubating Egg -->
                  <div 
                      id="egg-nest"
                      class="absolute w-full transform translate-y-8 text-center animate-bounce"
                      x-effect="if(isIncubating) { $nextTick(() => $dispatch('egg-fetch-ready')) }"
                      x-init="htmx.process($el)"
                      hx-get="{% url 'egg' %}"
                      hx-trigger="egg-fetch-ready"
                      hx-target="#egg-nest"
                      hx-swap="innerHTML"
                    >
                    <img class="mt-10 w-32 h-32 lg:mt-14 lg:w-40 lg:h-40 mx-auto rounded-full 
                                border-2 border-yellow-400/50 shadow-2xl
                                hover:border-yellow-400 hover:scale-110 
                                transition-all duration-500 holo-avatar" 
                          src="data:image/svg+xml,%3Csvg width='48' height='48' viewBox='0 0 48 48' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cellipse cx='24' cy='26' rx='12' ry='16' fill='%23fef3c7'/%3E%3Cellipse cx='24' cy='26' rx='8' ry='12' fill='%23fde047'/%3E%3C/svg%3E" 
                          alt="Incubating Egg"
                          style="filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.4));">
                  </div>
                  
                </div>
              </div>
            
            </div>
            
            <div class="text-lg font-semibold text-cyan-300 my-2"
                style="text-shadow: 0 0 10px rgba(6, 182, 212, 0.5);">
              ðŸ”® HOLOGRAPHIC INCUBATION ðŸ”®
            </div>
            <p class="text-cyan-400 text-sm mb-4 opacity-90"
                style="text-shadow: 0 0 8px rgba(52, 211, 153, 0.3);">
              Digital energy nurtures the precious egg...
            </p>
            
          </div>

        <!-- Egg Hatched Congrats-->
        <div 
          x-show="eggHatched && !isHatching"
          x-cloak
          x-transition:enter="transition ease-out duration-800 transform"
          x-transition:enter-start="opacity-0 scale-90 rotate-12"
          x-transition:enter-end="opacity-100 scale-100 rotate-0"
          class="text-center">
          
          <!-- Celebration Scene -->
          <div class="flex justify-center items-center mb-6">
            <!-- Excited turtle -->
            <div class="mx-2">
              <img class="w-12 rounded-full border-2 border-cyan-400 holo-avatar" 
                    src="/media/defaults/turtle_hurray.png" 
                    alt="A Turtle Hurraying"
                    style="image-rendering: pixelated;">
            </div>
            <!-- Celebration particles -->
            <div class="mx-2">
              <span class="text-2xl animate-ping">ðŸŽ‰</span>
            </div>
            <div class="mx-2">
              <img class="w-12 rounded-full border-2 border-cyan-400 holo-avatar" 
                    src="/media/defaults/turtle_hurray.png" 
                    alt="A Turtle Hurraying"
                    style="image-rendering: pixelated;">
            </div>
          </div>
          
          <div class="text-xl font-bold text-cyan-300 mb-3"
              style="text-shadow: 0 0 15px rgba(6, 182, 212, 0.7);">
            ðŸŽŠ THE TURTIE HATCHED! ðŸŽŠ
          </div>
          <p class="text-cyan-400 mb-6 opacity-90"
              style="text-shadow: 0 0 10px rgba(52, 211, 153, 0.4);">
            {% if profile.user == request.user %}
              Congratulations! Your patience has been rewarded.
            {% else %}
              Amazing! A new little turtie is born! 
            {% endif %}
          </p>
          
          <a 
            :href="`{% url 'index' %}#${hatchedPostId}`"
            {% if profile.user == request.user %}
              @click="$nextTick(() => {eggHatched = false; hatchedPostId = null})"
            {% endif %}
            class="pixel-btn flex justify-center items-center text-white font-bold py-3 px-6 
                    no-underline transform hover:scale-105 transition-all duration-300"
            style="text-decoration: none; font-family: 'Press Start 2P', monospace; font-size: 10px;"
          >
            <img class="w-8 lg:w-10 mx-2 rounded-full border border-cyan-400/50 holo-avatar" 
                  src="/media/defaults/turtle_run.png" 
                  alt="A turtle running"
                  style="image-rendering: pixelated;">
            <span 
              class="mx-2">
              {% if profile.user == request.user %}
                SHUT UP AND TAKE ME TO MY BABY
              {% else  %}
                TAKE ME TO IT
              {% endif %}
            </span>
            <img class="w-8 lg:w-10 mx-2 rounded-full border border-cyan-400/50 holo-avatar" 
                  src="/media/defaults/turtle_run.png" 
                  alt="A turtle running"
                  style="image-rendering: pixelated;">
          </a>
        </div>

      </div>

      

    </div>  <!-- End of nest section -->
    
    <!-- Egg Collection Museum -->
    <div class="flex-1 post-card rounded-xl p-4 lg:p-6">
      <div class="flex items-center justify-center mb-6">
        <h2 class="text-xl lg:text-2xl font-bold text-white font-mono"
            style="font-family: 'Press Start 2P', monospace; font-size: 16px; text-shadow: 0 0 15px rgba(52, 211, 153, 0.5);">
          COLLECTION
        </h2>
      </div>

      <!-- Global empty state when no eggs at all -->
      {% if not eggs.0.eggs and not eggs.1.eggs and not eggs.2.eggs %}
        <div class="text-center py-12">
          <div class="mb-4">
            <img class="w-16 mx-auto rounded-full border-2 border-cyan-400/50 p-2 holo-avatar" 
                  src="/media/defaults/sorry.png" 
                  alt="A turtle with sorry face">
          </div>
          <h3 class="text-lg lg:text-xl font-semibold text-white mb-2"
              style="text-shadow: 0 0 10px rgba(6, 182, 212, 0.3);">
            This collection chamber is quiet for now
          </h3>
          <p class="text-cyan-300 mb-4 opacity-80">However...</p>
          <div class="text-sm lg:text-md text-cyan-400 opacity-90"
                style="text-shadow: 0 0 8px rgba(52, 211, 153, 0.4);">
            A true turtler will lay eggs a dozen... With care...!!
          </div>
        </div>
      {% else %}
        <div class="space-y-6">
          {% for egg_type in eggs %}
            <div class="egg-type-section">
              {% if egg_type.eggs %}
                <div class="flex items-center mb-4">
                  {% if egg_type.name == 'special' %}
                    <span class="text-lg lg:text-xl font-bold text-yellow-400"
                        style="font-family: 'Press Start 2P', monospace; font-size: 14px; text-shadow: 0 0 15px rgba(251, 191, 36, 0.7);">
                      LEGENDARY EGGS
                    </span>
                  {% elif egg_type.name == 'regular' %}
                    <span class="text-lg lg:text-xl font-bold text-emerald-400"
                          style="font-family: 'Press Start 2P', monospace; font-size: 14px; text-shadow: 0 0 15px rgba(52, 211, 153, 0.7);">
                      CUTE EGGS
                    </span>
                  {% else %}
                    <span class="text-lg lg:text-xl font-bold text-pink-400"
                          style="font-family: 'Press Start 2P', monospace; font-size: 14px; text-shadow: 0 0 15px rgba(244, 114, 182, 0.7);">
                      EASTER EGGS
                    </span>
                  {% endif %}
              </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  {% for egg in egg_type.eggs %}
                    <div class="mini-screen rounded-lg p-4 hover:scale-105 transition-all duration-300 cursor-pointer group relative
                                {% if egg_type.name == 'easter' %}
                                  border-pink-400/50 hover:border-pink-400
                                {% elif egg_type.name == 'special' %}
                                  border-yellow-400/50 hover:border-yellow-400
                                {% else %}
                                  border-cyan-400/50 hover:border-cyan-400
                                {% endif %}">
                      
                      <div class="relative flex items-center justify-between">
                        <span class="font-medium text-white
                          {% if egg_type.name == 'easter' %}
                              group-hover:text-pink-300
                          {% elif egg_type.name == 'special' %}
                              group-hover:text-yellow-300
                          {% else %}
                              group-hover:text-cyan-300
                          {% endif %} transition-colors duration-200">
                          {{ egg.name|title }}
                        </span>
                        <div class="flex items-center">
                          <div class="relative">
                            <!-- Egg toolkit -->
                            {% include 'posts/partial/egg_toolkit.html' with egg=egg display_egg_image=True display_collected_date=True display_born_from=True %}
                            <img class="w-12 h-12 rounded-full border-2 
                                  {% if egg_type.name == 'special' %}
                                    border-yellow-400/50 group-hover:border-yellow-400
                                  {% elif egg_type.name == 'easter' %}
                                    border-pink-400/50 group-hover:border-pink-400
                                  {% else %}
                                    border-cyan-400/50 group-hover:border-cyan-400
                                  {% endif %}
                                  transition-all duration-200 hover:scale-110 holo-avatar" 
                                  src="{{ egg.url }}" 
                                  alt="{{ egg.name|title }}"
                                  style="image-rendering: pixelated;">
                          </div>
                          <span class="px-2 py-1 rounded-full text-sm font-bold ml-2 
                            {% if egg_type.name == 'special' %}
                              bg-yellow-500/20 text-yellow-300 border border-yellow-400/30
                            {% elif egg_type.name == 'easter' %}
                              bg-pink-500/20 text-pink-300 border border-pink-400/30
                            {% else %}
                              bg-cyan-500/20 text-cyan-300 border border-cyan-400/30
                            {% endif %} backdrop-blur-sm">
                            Ã— {{ egg.quantity }}
                          </span>
                        </div>
                      </div>
                    </div>
                  {% endfor %}
                </div>

              {% endif %}
            </div>
          {% endfor %}
        </div>
      
      {% endif %}
    </div>     <!-- End of egg collection  -->



 
</div>

<!-- Minimal Custom Styles -->
<style>
/* Holo Avatar Effect - Uses existing CSS variables from layout.html */
.holo-avatar {
  filter: drop-shadow(0 0 8px rgba(6, 182, 212, 0.3));
  image-rendering: pixelated;
}

.holo-avatar:hover {
  filter: drop-shadow(0 0 15px rgba(6, 182, 212, 0.5));
}

/* Mobile optimization - Reduced effects for better performance */
@media (max-width: 640px) {
  .holo-avatar {
    filter: drop-shadow(0 0 4px rgba(6, 182, 212, 0.3));
  }
  
  .mini-screen {
    backdrop-filter: blur(10px);
  }
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .animate-bounce,
  .animate-ping,
  .transition-all {
    animation: none !important;
    transition: none !important;
  }
}
</style>
